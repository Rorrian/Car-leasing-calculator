(()=>{"use strict";let e=!1;setTimeout((()=>{if(e){let e=new Event("windowScroll");window.addEventListener("scroll",(function(t){document.dispatchEvent(e)}))}}),0);function t(e,t,o){"range-car-cost"===e.id&&(t.style.width=(e.value-1e6)/(o-1e6)*100+"%"),"range-down-payment"===e.id&&(t.style.width=(e.value-10)/(o-10)*100+"%",n()),"range-leasing-term"===e.id&&(t.style.width=(e.value-1)/(o-1)*100+"%")}document.querySelectorAll(".form-calculation-item__block-input").forEach((e=>{const l=e.querySelector(".form-calculation-item__range"),r=e.querySelector(".form-calculation-item__input"),a=e.querySelector(".form-calculation-item__input-representation"),c=e.querySelector(".form-calculation-item__range-progress"),i=l.getAttribute("max");l.addEventListener("input",(function(){r.value=l.value,"range-car-cost"===l.id&&(a.innerHTML=parseInt(r.value).toLocaleString("ru")),t(l,c,i)})),l.addEventListener("input",(()=>{"range-car-cost"===l.id&&n(),o()})),r.addEventListener("input",(function(){r.value.length>=r.dataset.size&&(console.log(r.dataset.size),r.value=r.value.slice(0,r.dataset.size))})),r.addEventListener("change",(function(){const e=l.getAttribute("min");l.value=r.value,r.value>Number(i)?(c.style.width="100%",l.value=i,r.value=i):r.value<=Number(e)?(c.style.width="0%",l.value=e,r.value=e,n()):t(l,c,i),"input-car-cost"===r.id&&(a.innerHTML=parseInt(r.value).toLocaleString("ru"))})),r.addEventListener("change",(()=>{"input-car-cost"===r.id&&r.value>Number(r.min)&&n(),o()}))}));document.querySelectorAll(".form-calculation__input-list input").forEach((e=>{"number"===e.type&&(e.onfocus=()=>{e.style.backgroundColor="#ffffff",e.closest(".form-calculation-item__block-input").style.backgroundColor="#ffffff","input-down-payment"===e.id&&(e.parentElement.style.backgroundColor="#ffffff")},e.onblur=()=>{e.nextElementSibling.style.display="block",e.nextElementSibling.focus(),"input-down-payment"===e.id?(e.style.backgroundColor="#EBEBEC",e.parentElement.style.backgroundColor="#EBEBEC"):e.style.backgroundColor="#F3F3F4",e.closest(".form-calculation-item__block-input").style.backgroundColor="#F3F3F4"})}));function n(){const e=document.querySelector("#input-down-payment").value,t=document.querySelector(".down-payment"),n=document.querySelector("#input-car-cost").value;t.innerHTML=Math.ceil(n/100*e).toLocaleString("ru")}function o(){const e=document.querySelector("#input-car-cost").value,t=Number(document.querySelector(".down-payment").innerHTML.replace(/&nbsp;+/g,"")),n=document.querySelector("#input-leasing-term").value,o=.035,l=document.querySelector(".monthly-payment");l.innerHTML=Math.ceil((e-t)*(o*Math.pow(1.035,n)/(Math.pow(1.035,n)-1))).toLocaleString(),function(e,t,n){document.querySelector(".contract-amount").innerHTML=Math.ceil(e+t*Number(n.replace(/&nbsp;+/g,""))).toLocaleString()}(t,n,l.innerHTML)}document.querySelectorAll(".form-calculation-item__input-representation").forEach((e=>{e.addEventListener("click",(()=>{e.closest("._disabled")||(e.style.display="none",e.previousElementSibling.focus())}))})),document.forms[0].addEventListener("submit",(e=>{e.preventDefault(),async function(){const e=document.forms[0],t=e.querySelector('[type="submit"]'),n=e.querySelectorAll("input"),o=e.querySelectorAll(".form-calculation-item__block-input");try{t.disabled=!0,t.children[0].classList.remove("_hide"),t.children[1].classList.add("_hide"),n.forEach((e=>{e.disabled=!0})),o.forEach((e=>{e.classList.add("_disabled")})),await(r=2e3,new Promise((e=>{setTimeout((()=>e()),r)})));const a="https://hookb.in/eK160jgYJ6UlaRPldJ1P",c={car_coast:Number(e.querySelector("#input-car-cost").value),initail_payment:Number(e.querySelector(".down-payment").innerHTML.replace(/\s+/g,"")),initail_payment_percent:Number(e.querySelector("#input-down-payment").value),lease_term:Number(e.querySelector("#input-leasing-term").value),total_sum:Number(e.querySelector(".contract-amount").innerHTML.replace(/\s+/g,"")),monthly_payment_from:Number(e.querySelector(".monthly-payment").innerHTML.replace(/\s+/g,""))};let i=await fetch(a,{method:"post",headers:{"Content-Type":"application/json"},body:JSON.stringify(c)});if(l(n,o,t),i.success){let e=await i.json();console.log(e)}}catch(e){console.log(e),l(n,o,t)}var r}()}));function l(e,t,n){e.forEach((e=>{e.disabled=!1})),t.forEach((e=>{e.classList.remove("_disabled")})),n.children[0].classList.add("_hide"),n.children[1].classList.remove("_hide"),n.disabled=!1}window.FLS=!0})();